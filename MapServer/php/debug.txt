C:\ms4w\apps\fusion\MapServer\php
$_REQUEST = Array
(
    [locale] => es
    [mapfile] => /ms4w/apps/sagweb/htdocs/map/publico/public8.map
    [ROIRENDERER] => {\"0\": {\"type\": \"polygon\", \"aGeoCoords\": {\"0\": 673686.2880571245, \"1\": 5924472.599996666, \"2\": 613524.1636915222, \"3\": 5850489.447060588, \"4\": 685068.311585752, \"5\": 5787075.315972521, \"6\": 790758.5300658641, \"7\": 5748864.236983557, \"8\": 848481.6493896177, \"9\": 5797644.337820532, \"10\": 885879.7266979651, \"11\": 5845611.436976891, \"12\": 846042.644347769, \"13\": 5898456.546216947, \"14\": 897261.7502265926, \"15\": 5908212.566384342, \"16\": 845229.6426671527, \"17\": 5955366.6638600845, \"18\": 788319.5250240155, \"19\": 5927724.606719132, \"20\": 763116.4729249118, \"21\": 5996016.747890896, \"22\": 644418.2275549396, \"23\": 5970813.695791793}, \"label\": \"marca\"} }
    [formats] => {\"kml\": true, \"gml\": true, \"shp\": true}
)
$jsonPoly = {"0": {"type": "polygon", "aGeoCoords": {"0": 673686.2880571245, "1": 5924472.599996666, "2": 613524.1636915222, "3": 5850489.447060588, "4": 685068.311585752, "5": 5787075.315972521, "6": 790758.5300658641, "7": 5748864.236983557, "8": 848481.6493896177, "9": 5797644.337820532, "10": 885879.7266979651, "11": 5845611.436976891, "12": 846042.644347769, "13": 5898456.546216947, "14": 897261.7502265926, "15": 5908212.566384342, "16": 845229.6426671527, "17": 5955366.6638600845, "18": 788319.5250240155, "19": 5927724.606719132, "20": 763116.4729249118, "21": 5996016.747890896, "22": 644418.2275549396, "23": 5970813.695791793}, "label": "marca"} }
$_REQUEST = Array
(
    [locale] => es
    [mapfile] => /ms4w/apps/sagweb/htdocs/map/publico/public8.map
    [ROIRENDERER] => Array
        (
            [0] => Array
                (
                    [type] => polygon
                    [aGeoCoords] => Array
                        (
                            [0] => 673686.288057
                            [1] => 5924472.6
                            [2] => 613524.163692
                            [3] => 5850489.44706
                            [4] => 685068.311586
                            [5] => 5787075.31597
                            [6] => 790758.530066
                            [7] => 5748864.23698
                            [8] => 848481.64939
                            [9] => 5797644.33782
                            [10] => 885879.726698
                            [11] => 5845611.43698
                            [12] => 846042.644348
                            [13] => 5898456.54622
                            [14] => 897261.750227
                            [15] => 5908212.56638
                            [16] => 845229.642667
                            [17] => 5955366.66386
                            [18] => 788319.525024
                            [19] => 5927724.60672
                            [20] => 763116.472925
                            [21] => 5996016.74789
                            [22] => 644418.227555
                            [23] => 5970813.69579
                        )

                    [label] => marca
                )

        )

    [formats] => {\"kml\": true, \"gml\": true, \"shp\": true}
)
$_REQUEST[ROIRENDERER] = Array
(
    [0] => Array
        (
            [type] => polygon
            [aGeoCoords] => Array
                (
                    [0] => 673686.288057
                    [1] => 5924472.6
                    [2] => 613524.163692
                    [3] => 5850489.44706
                    [4] => 685068.311586
                    [5] => 5787075.31597
                    [6] => 790758.530066
                    [7] => 5748864.23698
                    [8] => 848481.64939
                    [9] => 5797644.33782
                    [10] => 885879.726698
                    [11] => 5845611.43698
                    [12] => 846042.644348
                    [13] => 5898456.54622
                    [14] => 897261.750227
                    [15] => 5908212.56638
                    [16] => 845229.642667
                    [17] => 5955366.66386
                    [18] => 788319.525024
                    [19] => 5927724.60672
                    [20] => 763116.472925
                    [21] => 5996016.74789
                    [22] => 644418.227555
                    [23] => 5970813.69579
                )

            [label] => marca
        )

)
$formats = Array
(
    [kml] => 1
    [gml] => 1
    [shp] => 1
)
$mapfile = /ms4w/apps/sagweb/htdocs/map/publico/public8.map
$aRoi = $_REQUEST[ROIRENDERER][i] = Array
(
    [type] => polygon
    [aGeoCoords] => Array
        (
            [0] => 673686.288057
            [1] => 5924472.6
            [2] => 613524.163692
            [3] => 5850489.44706
            [4] => 685068.311586
            [5] => 5787075.31597
            [6] => 790758.530066
            [7] => 5748864.23698
            [8] => 848481.64939
            [9] => 5797644.33782
            [10] => 885879.726698
            [11] => 5845611.43698
            [12] => 846042.644348
            [13] => 5898456.54622
            [14] => 897261.750227
            [15] => 5908212.56638
            [16] => 845229.642667
            [17] => 5955366.66386
            [18] => 788319.525024
            [19] => 5927724.60672
            [20] => 763116.472925
            [21] => 5996016.74789
            [22] => 644418.227555
            [23] => 5970813.69579
        )

    [label] => marca
)

Creando base files
Creando shapefile C:\ms4w\apps\fusion\MapServer\php\20607353324a7b7a8a40db5Poligonos_usuario
Shapefile creado
base files creados
$szFileNamePol = 20607353324a7b7a8a40db5Poligonos_usuario
Creando shapes del poligono 0 de 1 poligonos
Array
(
    [type] => polygon
    [aGeoCoords] => Array
        (
            [0] => 673686.288057
            [1] => 5924472.6
            [2] => 613524.163692
            [3] => 5850489.44706
            [4] => 685068.311586
            [5] => 5787075.31597
            [6] => 790758.530066
            [7] => 5748864.23698
            [8] => 848481.64939
            [9] => 5797644.33782
            [10] => 885879.726698
            [11] => 5845611.43698
            [12] => 846042.644348
            [13] => 5898456.54622
            [14] => 897261.750227
            [15] => 5908212.56638
            [16] => 845229.642667
            [17] => 5955366.66386
            [18] => 788319.525024
            [19] => 5927724.60672
            [20] => 763116.472925
            [21] => 5996016.74789
            [22] => 644418.227555
            [23] => 5970813.69579
        )

    [label] => marca
)
agregando shape a $aROI 0
Creando shape
Creanndo shape con 26 puntos
ms_line_obj Object
(
    [_handle_] => Resource id #49
    [numpoints] => 13
)
ms_shape_obj Object
(
    [_handle_] => Resource id #47
    [numlines] => 1
    [type] => 0
    [index] => -1
    [tileindex] => -1
    [classindex] => 0
    [numvalues] => 0
    [text] => 
    [bounds] => ms_rect_obj Object
        (
            [_handle_] => Resource id #48
            [minx] => -1
            [miny] => -1
            [maxx] => -1
            [maxy] => -1
        )

)
Shape creado
Guardando archivos
Guardando shapefile
adding record to 20607353324a7b7a8a40db5Poligonos_usuario
oppening dbf file
dbf file opened
oppening C:\ms4w\apps\fusion\MapServer\php\20607353324a7b7a8a40db5Poligonos_usuario
adding shape
shape added
adding properties to dbf
properties added
record added
Shapefile guardado
Guardando kml
Recorriendo lineas (13 lineas) ...
ms_point_obj Object
(
    [_handle_] => Resource id #54
    [x] => -73.0528930991
    [y] => -36.8096697352
)
-73.0528930991, -36.8096697352, 0
ms_point_obj Object
(
    [_handle_] => Resource id #56
    [x] => -73.7159216477
    [y] => -37.4855328322
)
-73.7159216477, -37.4855328322, 0
ms_point_obj Object
(
    [_handle_] => Resource id #58
    [x] => -72.8909180586
    [y] => -38.0451538658
)
-72.8909180586, -38.0451538658, 0
ms_point_obj Object
(
    [_handle_] => Resource id #60
    [x] => -71.6723424115
    [y] => -38.3612015673
)
-71.6723424115, -38.3612015673, 0
ms_point_obj Object
(
    [_handle_] => Resource id #62
    [x] => -71.0368890501
    [y] => -37.9020305496
)
-71.0368890501, -37.9020305496, 0
ms_point_obj Object
(
    [_handle_] => Resource id #64
    [x] => -70.6380262816
    [y] => -37.4558730678
)
-70.6380262816, -37.4558730678, 0
ms_point_obj Object
(
    [_handle_] => Resource id #66
    [x] => -71.1118482411
    [y] => -36.9963878221
)
-71.1118482411, -36.9963878221, 0
ms_point_obj Object
(
    [_handle_] => Resource id #68
    [x] => -70.5429520195
    [y] => -36.8884847885
)
-70.5429520195, -36.8884847885, 0
ms_point_obj Object
(
    [_handle_] => Resource id #70
    [x] => -71.1466755916
    [y] => -36.4848225986
)
-71.1466755916, -36.4848225986, 0
ms_point_obj Object
(
    [_handle_] => Resource id #72
    [x] => -71.7705143255
    [y] => -36.7524409141
)
-71.7705143255, -36.7524409141, 0
ms_point_obj Object
(
    [_handle_] => Resource id #74
    [x] => -72.075653042
    [y] => -36.1449051385
)
-72.075653042, -36.1449051385, 0
ms_point_obj Object
(
    [_handle_] => Resource id #76
    [x] => -73.3895782032
    [y] => -36.3969890791
)
-73.3895782032, -36.3969890791, 0
-73.0528930991, -36.8096697352, 0
kml guardado
arreglo archivos = Array
(
    [0] => 20607353324a7b7a8a40db5Poligonos_usuario.shp
    [1] => 20607353324a7b7a8a40db5Poligonos_usuario.shx
    [2] => 20607353324a7b7a8a40db5Poligonos_usuario.dbf
    [3] => 20607353324a7b7a8a40db5Poligonos_usuario.kml
)
Comprimiendo archos
Archivos comprimidos
